<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/idb-keyval@5/dist/iife/index-min.js"></script>
</head>

<body>
    <span>Key</span>
    <input type="text" id="key">
    <span>Value</span>
    <input type="text" id="value">
    <button onclick="store()">Store</button>
    <button onclick="get()">Get</button>
    <button onclick="entries()">Entries</button>
    <button onclick="keys()">keys</button>
    <button onclick="values()">values</button>
    <div id="show"></div>
    <script>
        let show = document.getElementById("show")
        function store() {
            let key_value = document.getElementById("key").value
            let value_value = document.getElementById("value").value

            if (key_value && value_value) {
                idbKeyval.set(key_value, value_value)
                    .then(() => console.log('It worked!'))
                    .catch((err) => console.log('It failed!', err));

                // idbKeyval.setMany([
                //     [123, 456],
                //     ['hello', 'world'],
                // ])
                //     .then(() => console.log('It worked!'))
                //     .catch((err) => console.log('It failed!', err));

            } else {
                alert("empty value")
            }
        }

        function get() {
            idbKeyval.get('hello').then((val) => show.innerHTML = `${val}`);

            idbKeyval.getMany([123, 'hello']).then(([firstVal, secondVal]) =>
                console.log(firstVal, secondVal),
            );
        }

        function update() {
            update('counter', (val) => (val || 0) + 1);
            // same as set again
        }

        function del() {
            idbKeyval.del('hello');

            idbKeyval.delMany([123, 'hello'])
                .then(() => console.log('It worked!'))
                .catch((err) => console.log('It failed!', err));
        }

        function clear() {
            idbKeyval.clear();
            // clear all the store
        }

        function entries() {
            //[[123, 456], ['hello', 'world']]
            idbKeyval.entries().then((entries) => show.innerHTML = `${entries}`);
        }

        function keys() {
            // logs: [123, 'hello']
            idbKeyval.keys().then((keys) => show.innerHTML = `${keys}`);
        }

        function values() {
            // logs: [456, 'world']
            idbKeyval.values().then((values) => show.innerHTML = `${values}`);
        }
    </script>
</body>

</html>